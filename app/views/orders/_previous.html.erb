<section class="order__section order__previous">
  <% unless orders[0..-2].empty? %>
    <h3 class="order__section--title">Previous Orders</h3>

    <% orders.order("date DESC").each do |order|%>
      <% unless order.date.nil? %>
        <div class="order__previous--item">
          <p class="order__previous--id">Order #<%= order.id %></p>
          <p class="order__previous--date">Ordered at <%= order.date.to_formatted_s(:short) %></p>

          <% order.order_items.each do |item| %>
            <div class="order__item">
                <p class="order__item--name"><%= item.menu_item_name %></p>
                <p class="order__item--price">&#x20B9; <%= item.menu_item_price %></p>
            </div>
          <% end %>

          <% order_delivered = order.delivered_at.nil? %>

          <p class="order__previous--status">

            <% if order_delivered %>
              <span>Status: </span>
              <span class="order__previous--status-received">Order received</span>
            <% else %>
              <span>Status: </span>
              <span class="order__previous--status-delivered">Delivered (<%= order.delivered_at.to_formatted_s(:short) %>)</span>
            <% end %>
          </p>
        </div>
      <% end %>
    <% end %>
  <% end %>
</section>